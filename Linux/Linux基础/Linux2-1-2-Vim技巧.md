---
title: Linux2.1.2 Vim技巧
tags:
- Vim
- Linux
date: 2016-10-26 14:12:58
---

###1.保存文件并退出
`:x`=`:wq`

###2.计算器
在插入模式下，你可以使用 `Ctrl+r` 键然后输入 `=`，再输入一个简单的算式。按 Enter 键，计算结果就会插入到文件中。

###3.查找重复的连续的单词
使用搜索命令（默认时 /）然后输入：
`\(\<\w\+\>\)\_s*\1`
这会显示所有重复的单词。

要达到最好的效果，不要忘记把下面的命令：

```shell
set hlsearch
```
放到你的 .vimrc 文件中高亮所有的匹配。

<!-- more -->

###4.缩写

`:ab [缩写] [要替换的文字]`

###5.在你忘记用 root 方式打开文件时的文件保存
`:w !sudo tee %`

###6.实时加密文本
如果你不想让别人看懂你的屏幕上的内容，你可以使用一个内置的选项，通过下面的命令使用 ROT13 来对文本进行编码：        
`ggVGg?`    

`gg` 把光标移动到 Vim 缓冲区的第一行，`V `进入可视模式，`G` 把光标移动到缓冲区的最后一行。因此，`ggVG` 使可视模式覆盖这个当前缓冲区。最后` g?` 使用 ROT13 对整个区域进行编码。    

注意它可以被映射到一个最常使用的键。它对字母符号也可以很好地工作。要对它进行撤销，最好的方法就是使用撤销命令：`u`。    

###7.自动补全
在插入模式，按 `Ctrl+n `键就可以看到 Vim 为你补全了单词。

###8.比较两个文件的不同

####(1)

```shell
vimdiff [文件1] [文件2]
```
使用分离模式打开 Vim 并比较两个文件的不同

####(2)
首先在 Vim 中打开原始文件。然后使用分离模式带来第二个文件    
`:vsp [文件2]`    
最后在第一个缓冲区里输入    
`:diffthis`    
通过 `Ctrl+w` 来切换缓冲区并再次输入：    
`:diffthis `   
这样两个文件中不同的部分就会被高亮。    

---

可以直接在一个缓冲区里使用命令` :windo diffthis`，而不用输入 `:diffthis `两次    
要停止比较，使用：    
`:diffoff  `  

###9.按时间回退文件
`:earlier 1m`    
会把文件回退到 1 分钟以前的状态。    
注意，你可以使用下面的命令进行相反的转换：    
`:later`    

###10.删除标记内部的文字
`di[标记]`    

比如，把光标放在开始的圆括号上，使用下面的命令来删除圆括号内的文字：    
`di(`    
如果是方括号或者是引号，则使用：    
`di{`	`di"`    

###11.删除指定标记前的内容
和删除标记内部有些相似，但目的不同。命令如下：        
`dt[标记]`    
会删除所有光标和标记之间的内容（保持标记不动），如果在同一行有这个标记的话。例如        
`dt. `       
会删除至句子的末尾，但保持 `‘.’` 不动。    

###12.把 Vim 变为十六进制编辑器
`:%!xxd`        
类似的，你可以通过下面的命令恢复原来的状态：    
`:%!xxd -r`    

###13.把光标下的文字置于屏幕中央
在可视模式中使用命令,普通模式中也可以        
`zz`

###14.跳到上一个／下一个位置
`Ctrl+o`
回到之前修改的地方    
`Ctrl+i`
回退上面的跳动

###15.把当前文件转化为网页
这会生成一个 HTML 文件来显示文本，并在分开的窗口显示源代码：    

```shell
:%TOhtml
```
