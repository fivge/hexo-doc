---
title: Linux2.1.1 Vim
tags:
- Vim
- Linux
date: 2016-10-25 15:37:53
---

## 零、综述

```shell
vim 文件名
```
打开或新建文件

vim启动进入普通模式，处于插入模式或命令行模式时只需要按`Esc`或者`Ctrl`+`[`即可进入普通模式      

普通模式下输入`Shift`+`zz`即可保存退出vim
## 一、普通模式

`.`(小数点)表示重复上一次的命令操作    

`n<command>`表示重复命令n次

### 移动

h,j,k,l 左下上右移动；w，b 移动到下\上一个单词    

+ `nG`     游标移动到第 n 行
+ `gg`      游标移动到到第一行
+ `G`       到最后一行
+ `Ctrl+o`  快速回到上一次(跳转前)光标所在位置
  + `w`到下一个单词的开头
  + `e`到下一个单词的结尾
  + `b`到前一个单词的开头
  + `ge`到前一个单词的结尾
  + `0`或`^`到行头
  + `$`到行尾
  + `f<字母>`向后搜索<字母>并跳转到第一个匹配的位置(非常实用)
  + `F<字母>`向前搜索<字母>并跳转到第一个匹配的位置
  + `t<字母>`向后搜索<字母>并跳转到第一个匹配位置之前的一个字母(不常用)
  + `T<字母>`向前搜索<字母>并跳转到第一个匹配位置之前的一个字母(不常用)

### 删除(剪切)

+ `x`       删除游标所在的字符
+ `X`       删除游标所在前一个字符
+ `Delete`  同x
+ `dd`      删除整行
+ `dw`或`daw` 删除一个单词（不适用中文）,dnw 删除n个单词
+ `d$`或`D`   删除至行尾
+ `d^`      删除至行首
+ `dG`      删除到文档结尾处
+ `d1G`     删至文档首部

### 复制、粘贴

+ `y`       复制
+ `yy`      复制游标所在的整行（3yy表示复制3行）
+ `y^`      复制至行首，或y0。不含光标所在处字符。
+ `y$`      复制至行尾。含光标所在处字符。
+ `yw`      复制一个单词。
+ `y2w`     复制两个单词。
+ `yG`      复制至文本末。
+ `y1G`     复制至文本开头。
+ `p`       粘贴
  + `p`(小写)代表粘贴至光标后（下）
  + `P`(大写)代表粘贴至光标前（上）
  + `ddp`交换上下行

### 替换和撤销(Undo)命令

+ `r+<待替换字母>`	将游标所在字母替换为指定字母
  + `R`        	连续替换，直到按下Esc
    + `cc`        替换整行，即删除游标所在行，并进入插入模式
    + `cw`        替换一个单词，即删除一个单词，并进入插入模式
  + `C`(大写)        替换游标以后至行末
    + `~`        反转游标所在字母大小写
    + `u{n}`        撤销一次或n次操作
  + `U`(大写)        撤销当前行的所有修改
  + `Ctrl+r`        redo，即撤销undo的操作

<!-- more -->

### 快速缩进

#### 1.使用命令进行快速调整缩进操作

+ `>>` 整行将向右缩进（使用，用于格式化代码超爽）
+ `<<` 整行向左回退

#### 2.shiftwidth命令

shiftwidth命令是指上一节>>命令产生的缩进（可以简写成sw） 

普通模式下输入:进入命令行模式下对shiftwidth值进行设置可以控制缩进和回退的字符数 
获取目前的设定值:set shiftwidth?
设置缩进为10个字符:set shiftwidth=10

#### 3.调整文本位置

+ `:ce(center)` 使本行内容居中
+ `:ri(right)`  使本行文本靠右
+ `:le(left)`   使本行内容靠左

### 查找

+ `/sth.`	向下查找"sth." 
  + `?sth`向上查找"sth."
  + `\*`      寻找游标所在处的单词
  + `\#`      同上，但 `\*` 是向前找，`\#`则是向后找
  + `g\*`      同`\*` ，但部分符合该单词即可
  + `g\#`同`\#` ，但部分符合该单词即可

进入查找之后，输入`n`继续查找，`N`反向查找

## 二、插入模式

+ `i`     在当前光标处进行编辑
+ `I`       在行首插入
+ `A`       在行末插入
+ `a`       在光标后插入编辑
+ `o`       在当前行后插入一个新行
+ `O`       在当前行前插入一个新行
+ `cw`      替换从光标所在位置后到一个单词结尾的字符

## 三、命令行模式

+ `:w` 保存
  + `:w<文件名>` 将文档另存为其他文件名或其它路径下
+ `:saveas<文件名>` 将文档另存为其他文件名或其它路径下
+ `:q` 退出
+ `:!` 强制
+ `:q!` 强制退出，不保存
+ `:wq!` 强制保存并退出
+ `:x` 保存并退出
+ `:wq` 保存并退出
+ `:set nu`    显示行号

## 四、可视模式

普通模式下输入    

`v`(小写)			字符选择模式	    
`V`(大写)			行选择模式    
`Ctrl+v`（小写)	区域选择模式    
`d`					删除选取区域内容    
`y`					复制选取区域内容    

## 五、多文件编辑

### 1.使用vim编辑多个文件
```shell
vim file1 file2 file3
```
默认进入第一个文件的编辑界面

+ `:n`编辑下一个文件
+ `:N`编辑上一个文件
+ 加`!`强制切换，之前文件没有保存，仅仅是切换到另一个文件

### 2.进入vim后打开新文件

+ `:e 3.txt` 打开新文件3.txt
+ `:e#` 回到前一个文件
+ `:e! 4.txt`，新打开文件4.txt，放弃正在编辑的文件
+ `:ls`可以列出以前编辑过的文档
+ `:b 2.txt（或者编号）`可以直接进入文件2.txt编辑
+ `:bd 2.txt（或者编号）`可以删除以前编辑过的列表中的文件项目
+ `:f `显示正在编辑的文件名
+ `:f new.txt`    改变正在编辑的文件名字为new.txt

### 3.恢复文件

如果因为断电等原因造成文档没有保存，可以采用恢复方式，
`vim -r`进入文档后，输入`:ewcover 1.txt`来恢复

```shell
vim -r 1.txt
```

## 六、视窗操作

+ `:new`或`Ctrl+w` 打开一个新的vim视窗，并进入视窗编辑一个新文件
+ `:sp 1.txt` 打开新的横向视窗来编辑1.txt
+ `:vsp 2.txt` 打开新的纵向视窗来编辑1.txt
+ `Ctrl-w s` 将当前窗口分割成两个水平的窗口
+ `Ctrl-w v` 将当前窗口分割成两个垂直的窗口
+ `Ctrl-w q` 即 `:q `结束分割出来的视窗。如果在新视窗中有输入需要使用强制符！即:q!
+ `Ctrl-w o` 打开一个视窗并且隐藏之前的所有视窗
+ `Ctrl-w j `移至下面视窗
+ `Ctrl-w k` 移至上面视窗
+ `Ctrl-w h` 移至左边视窗
+ `Ctrl-w l` 移至右边视窗
+ `Ctrl-w J `将当前视窗移至下面
+ `Ctrl-w K `将当前视窗移至上面
+ `Ctrl-w H` 将当前视窗移至左边
+ `Ctrl-w L` 将当前视窗移至右边
+ `Ctrl-w -` 减小视窗的高度
+ `Ctrl-w +` 增加视窗的高度

## 七、文档加密

创建加密文档

```shell
vim -x file1
```
输入您的密码 确认密码
这样在下一次打开时，vim就会要求你输入密码

## 八、在vim执行外部命令

+ `:!<命令名>` 执行外部的shell命令

## 九、功能设定


可以在编辑文件的时候进行功能设定，**设定值退出vim后不会保存**。    
要永久保存配置需要修改vim配置文件。 vim的配置文件`~/.vimrc`，可以打开文件进行修改，不过务必小心不要影响vim正常使用    

+ `F1`打开vim自己预设的帮助文档
+ `:h shiftwidth` 打开名为shiftwidth的帮助文件
+ `:ver` 显示版本及参数

+ `:set`或者`:se`显示所有修改过的配置    
+ `:set all `显示所有的设定值    
+ `:set option?` 显示option的设定值    
+ `:set nooption` 取消当期设定值    

---

+ `:set autoindent(ai)` 设置自动缩进    
+ `:set autowrite(aw)` 设置自动存档，默认未打开    
+ `:set background=dark或light`，设置背景风格    
+ `:set backup(bk)` 设置自动备份，默认未打开    
+ `: set cindent(cin) `设置C语言风格缩进    
