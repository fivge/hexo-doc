---
title: Linux1.2 用户及文件权限管理
tags:
- Linux
date: 2016-10-25 15:20:32
---

#linux用户管理
#`who`

```shell
who am i 
who mom likes
```
输入的第一列表示打开当前伪终端的用户的用户名（要查看当前登录用户的用户名，去掉空格直接使用`whoami`即可），第二列的pts/0中pts表示伪终端，第三列则表示当前伪终端的启动时间。    

* `-a`    打印能打印的全部
  * `-d`打印死掉的进程
  * `-m`同am i,mom likes
  * `-q`打印当前登录用户数及用户名
  * `-u`打印当前登录用户登录信息
  * `-r`打印运行等级

<!-- more -->

 新建用户     

```shell
sudo adduser luan    
```
 切换用户  
​    
```shell
su -l luan    
```

##用户组
###1. 查看所属用户组 
```shell
groups lover    
```
冒号之前表示用户，后面表示该用户所属的用户组        
###2. 查看/etc/group文件
```shell
cat /etc/group | sort    
```
/etc/group的内容包括用户组（Group）、用户组口令、GID及该用户组所包含的用户（User），每个用户组一条记录。格式如下：    group_name:password:GID:user_list    
password字段为一个'x'表示密码不可见    
###3. 将其它用户加入sudo用户组    
`usermod`命令可以为用户添加用户组 

```shell
sudo usermod -G sudo lover    
```
###4. 移除用户 
```shell
sudo deluser lover --remove-home    
```

#linux文件权限

##1.查看文件权限
使用较长格式列出文件 

```shell
ls -l    
```
| drwxr-xr-x | 4    | x    | x     | 4096 | 2月   | 26   | 19:10 | 桌面   |
| ---------- | ---- | ---- | ----- | ---- | ---- | ---- | ----- | ---- |
| 文件类型和权限    | 链接数  | 所有者  | 所属用户组 | 文件大小 | 最后   | 修改   | 时间    | 文件名  |

| d    | rwx   | r-x     | r-x    |
| ---- | ----- | ------- | ------ |
| 文件类型 | 拥有者权限 | 所属用户组权限 | 其他用户权限 |

文件类型:`d` 目录，`l` 软链接，`b` 块设备，`c` 字符设备，`s` socket网络套接字，`p`  pipe管道，`-` 普通文件         
权限:`r` 读，`w` 写，`x` 执行      


文件类型 ：linux里面一切皆文件.    
>软链接文件，链接文件是分为两种的，另一种当然是“硬链接”(硬链接不常用，具体内容不作为本课程讨论重点，而软链接等同于windows上的快捷方式) 

** 文件权限 ：
一个目录要同时具有读权限和执行权限才可以打开，
而一个目录要有写权限才允许在其中创建其它文件，
这是因为目录文件实际保存着该目录里面的文件的列表等信息    **

所有者权限，这一点相信你应该明白了，至于所属用户组权限，是指你所在的用户组中的所有其它用户对于该文件的权限式,你记住这一点就够了）    

链接数：链接到该文件所在的inode结点的文件名数目    

文件大小：以inode结点大小为单位来表示的文件大小，你可以给ls加上-h参数（表示，这才是给人看的）来更直观的查看文件的大小    

查看某一个目录的完整属性，而不是显示目录里面的文件属性 ls -dl <目录名>
显示所有文件大小，并以普通人类能看懂的方式呈现 ls -AsSh 其中小s为显示文件大小，大S为按文件大小排序    

##2.变更文件所有者 `chown`

```shell
touch iphone6
ll iphone6
cd /home/lilei
ls iphone6
sudo chown shiyanlou iphone6
cp iphone6 /home/shiyanlou
ll iphone6
```

##3.修改文件权限 `chmod`
###方式一：`二进制`数字表示    
r2w1x0 

```shell
chmod 700 iphone6    
```

`rwx`$$7=4+2+1=2^2+2^1+2^0$$

`rw-`$$6=4+2+0=2^2+2^1+0$$

`r-x`$$5=4+0+1=2^2+0+2^0$$

`r--`$$4=4+0+0=2^2+0+0$$

`---`$$0=0+0+0=0+0+0$$

###方式二：加减赋值操作    

```shell
chmod go-rw iphone     
```

'g''o'还有'u'，分别表示group，others，user,'+','-'就分别表示增加和去掉相应的权限    
